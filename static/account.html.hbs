{{#*inline "title"}}Account{{/inline}}

{{#*inline "body"}}
    <div class="container">
        <h1>Account</h1>

        <div class="account-info">
            <h2>Profile</h2>
            <p><strong>Username:</strong> {{user}}</p>
        </div>

        <div class="change-password">
            <h2>Change Password</h2>
            <form action="/change-password" method="POST" id="change-password-form">
                <div class="form-group">
                    <label for="current-password">Current Password</label>
                    <input type="password" id="current-password" name="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="new-password">New Password</label>
                    <input type="password" id="new-password" name="newPassword" required>
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirm New Password</label>
                    <input type="password" id="confirm-password" name="confirmPassword" required>
                </div>
                <div id="password-error" class="error-message" style="display: none;">Passwords do not match.</div>
                <button type="submit" class="submit-btn">Change Password</button>
            </form>
        </div>

        <div class="delete-account">
            <h2>Delete Account</h2>
            <p>This action is irreversible. All your data will be permanently deleted.</p>
            <form action="/delete-account" method="POST">
                <button type="submit" class="btn btn-danger">Delete My Account</button>
            </form>
        </div>
    </div>

    <script>
        const form = document.getElementById('change-password-form');
        const newPassword = document.getElementById('new-password');
        const confirmPassword = document.getElementById('confirm-password');
        const passwordError = document.getElementById('password-error');

        form.addEventListener('submit', (event) => {
            if (newPassword.value !== confirmPassword.value) {
                event.preventDefault();
                passwordError.style.display = 'block';
            } else {
                passwordError.style.display = 'none';
            }
        });
    </script>
{{/inline}}

{{> base user=user}}
